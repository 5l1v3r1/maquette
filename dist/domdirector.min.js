!function(e){"use strict";var n=!1,o=function(){},r=[],t=function(e,n){var o={};return Object.keys(e).forEach(function(n){o[n]=e[n]}),n&&Object.keys(n).forEach(function(e){o[e]=n[e]}),o},i=function(e,n,o,r,t){for(var d=0;d<n.length;d++){var l=n[d];Array.isArray(l)?r=i(l,o,r):(a(e,l,t),o.splice(r,0,l),r++)}return r},a=function(e,o,r){if(!n){var t=o.vnodeSelector;if(!(""===t||o.properties&&o.properties.key)){for(var i=0;i<r.length;i++)if(t===r[i])throw new Error("["+e+"] contains undistinguishable child nodes ["+t+"], please add unique key properties.");r.push(t)}}},d=function(e){return{vnodeSelector:"",text:null==e?"":""+e,domNode:null}},l=function(e,n){if(null===n||void 0===n)return null;if(!Array.isArray(n))return n.hasOwnProperty("vnodeSelector")?[n]:[d(n)];for(var o=0,r=[];o<n.length;){var t=n[o];t?Array.isArray(t)?(n.splice(o,1),o=i(e,t,n,o,r)):t.hasOwnProperty("vnodeSelector")?(a(e,t,r),o++):(n[o]=d(t),o++):n.splice(o,1)}return n},u=/([\.#]?[a-zA-Z0-9_:-]+)/,s={nodeToRemove:function(e){e.parentNode.removeChild(e)},nodeAdded:o,nodeUpdated:o},c={namespace:null,transitions:s},f=function(e){return t(c,e)},p=function(e,n,o){if(n){var r=o.eventHandlerInterceptor;for(var t in n){var i=n[t];if("class"===t||"className"===t||"classList"===t)throw new Error("Not supported, use 'classes' instead.");if("classes"===t)for(var a in i)i[a]&&e.classList.add(a);else r&&"function"==typeof i&&(i=r(t,i)),e[t]=i}}},m=function(e,n,o){if(o)for(var r in o){var t=o[r],i=n[r];if("classes"===r){if(t===i)continue;for(var a in t){var d=!!t[a],l=!!i[a];d!==l&&(d?e.classList.add(a):e.classList.remove(a))}}else{if(t||"string"!=typeof i||(t=""),"value"===r){if(e.value===t)continue;e.value=t;continue}if(t!==i){if("function"==typeof t)throw new Error("Functions may not be updated on subsequent calls (property: "+r+")");e[r]=t}}}},v=function(e,n,o){n&&n.forEach(function(n){N(n,function(n){e.appendChild(n)},o)})},h=function(e,n){return e.vnodeSelector!==n.vnodeSelector?!1:e.properties&&n.properties?e.properties.key===n.properties.key:!e.properties&&!n.properties},w=function(e,n,o){if(""!==n.vnodeSelector)for(var r=o;r<e.length;r++)if(h(e[r],n))return r;return-1},y=function(e,n,o,t){if(n!==o){n=n||r,o=o||r;for(var i,a=t.transitions,d=0,l=0;l<o.length;){var u=d<n.length?n[d]:null,s=o[l];if(u&&h(u,s))A(u,s,t),d++;else{var c=w(n,s,d+1);if(c>=0){for(i=d;c>i;i++)a.nodeToRemove(n[i].domNode);A(n[c],s,t),d=c+1}else N(s,function(o){if(d<n.length){var r=n[d];r.domNode.parentNode.insertBefore(o,r.domNode)}else e.appendChild(o)},t),a.nodeAdded(s.domNode)}l++}if(n.length>d)for(i=d;i<n.length;i++)a.nodeToRemove(n[i].domNode)}},N=function(e,n,o){if(""===e.vnodeSelector)e.domNode=document.createTextNode(e.text),n(e.domNode);else{var r,i,a,d,l=e.vnodeSelector.split(u);for(a=0;a<l.length;a++)i=l[a],i&&(d=i.charAt(0),r?"."===d?r.classList.add(i.substring(1)):"#"===d&&(r.id=i.substr(1)):("svg"===i&&(o=t(o,{namespace:"http://www.w3.org/2000/svg"})),r=e.domNode=o.namespace?document.createElementNS(o.namespace,i):document.createElement(i),n(r)));g(r,e,o)}},g=function(e,n,o){p(e,n.properties,o),v(e,n.children,o),n.properties&&n.properties.afterCreate&&n.properties.afterCreate(e,n.vnodeSelector,n.properties,n.children)},A=function(e,n,o){var r=e.domNode;if(!r)throw new Error("previous node was not mounted");e!==n&&(""===n.vnodeSelector?n.text!==e.text&&(r.nodeValue=n.text):(m(r,e.properties,n.properties,o),y(r,e.children,n.children,o)),n.domNode=e.domNode)};window.performance=window.performance||{offset:new Date,now:function(){return new Date-this.offset}};var S={lastCreateVDom:null,lastCreateDom:null,lastUpdateVDom:null,lastUpdateDom:null,lastRenderLoop:null,createExecuted:function(e,n,o,r){S.lastRenderLoop=r,S.lastCreateVDom=n-e,S.lastCreateDom=o-n},updateExecuted:function(e,n,o,r){S.lastRenderLoop=r,S.lastUpdateVDom=n-e,S.lastUpdateDom=o-n}},D={h:function(e,n,o){return!o&&("string"==typeof n||Array.isArray(n)||n&&n.hasOwnProperty("vnodeSelector"))&&(o=n,n=null),o=l(e,o),{vnodeSelector:e,properties:n,children:o,domNode:null}},createDom:function(e,n){return n=f(n),N(e,o,{}),{update:function(o){A(e,o,n),e=o},domNode:e.domNode}},mergeDom:function(e,n,o){return o=f(o),n.domNode=e,g(e,n,o),{update:function(e){A(n,e,o),n=e},domNode:e}},renderLoop:function(e,n,o){o=f(o),o.eventHandlerInterceptor=function(e,n){return function(){return d.scheduleRender(),n.apply(this,arguments)}};var r,t=null,i=!1,a=function(){if(r=null,t){var i=window.performance.now(),a=n(),l=window.performance.now();t.update(a),S.updateExecuted(i,l,window.performance.now(),d)}else{var u=window.performance.now(),s=n(),c=window.performance.now();t=D.mergeDom(e,s,o),S.createExecuted(u,c,window.performance.now(),d)}};r=requestAnimationFrame(a);var d={scheduleRender:function(){r||i||(r=requestAnimationFrame(a))},destroy:function(){r&&(cancelAnimationFrame(r),r=null),i=!0}};return d},createCache:function(){var e=null,n=null,o={invalidate:function(){n=null,e=null},calculate:function(o,r){if(e)for(var t=0;t<keys.length;t++)e[t]!==keys[t]&&(n=null);return n||(n=r(),e=keys),n}};return o},stats:S};void 0!==e.module&&e.module.exports?e.module.exports=D:"function"==typeof e.define&&e.define.amd?e.define(function(){return D}):e.domdirector=D}(this);