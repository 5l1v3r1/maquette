!function(e){"use strict";var t=[],r=function(e,t){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),t&&Object.keys(t).forEach(function(e){r[e]=t[e]}),r},o=function(e,t,r,a,s){for(var d=0;d<t.length;d++){var u=t[d];Array.isArray(u)?a=o(e,u,r,a,s):null!==u&&void 0!==u&&(u.hasOwnProperty("vnodeSelector")?n(e,u,s):u=i(u),r.splice(a,0,u),a++)}return a},n=function(e,t,r){var o=t.vnodeSelector;if(!(""===o||t.properties&&t.properties.key)){for(var n=0;n<r.length;n++)if(o===r[n])throw new Error("["+e+"] contains indistinguishable child nodes ["+o+"], please add unique key properties.");r.push(o)}},i=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:null===e||void 0===e?"":e.toString(),domNode:null}},a=function(e,t){if(null===t||void 0===t)return void 0;if(!Array.isArray(t))return t.hasOwnProperty("vnodeSelector")?[t]:[i(t)];for(var r=0,a=[];r<t.length;){var s=t[r];null===s||void 0===s?t.splice(r,1):Array.isArray(s)?(t.splice(r,1),r=o(e,s,t,r,a)):s.hasOwnProperty("vnodeSelector")?(n(e,s,a),r++):(t[r]=i(s),r++)}return t},s={namespace:void 0,transitions:{enter:function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")},exit:function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")}}},d=function(e){return r(s,e)},u=function(e,t,r){if(t){var o=r.eventHandlerInterceptor;for(var n in t){var i=t[n];if("class"===n||"className"===n||"classList"===n)throw new Error("Property "+a+" is not supported, use 'classes' instead.");if("classes"===n)for(var a in i)i[a]&&e.classList.add(a);else if("styles"===n)for(var s in i){var d=i[s];if(d){if("string"!=typeof d)throw new Error("Style values may only be strings");e.style[s]=d}}else{if("key"===n)continue;if(null===i||void 0===i)continue;var u=typeof i;"function"===u?(o&&0===n.lastIndexOf("on",0)&&(i=o(n,i,e),"oninput"===n&&!function(){var e=i;i=function(t){t.target["oninput-value"]=t.target.value,e.apply(this,[t])}}()),e[n]=i):"string"===u&&"value"!==n?e.setAttribute(n,i):e[n]=i}}}},l=function(e,t,r){if(r){var o=!1;for(var n in r){var i=r[n],a=t[n];if("classes"===n){var s=e.classList;for(var d in i){var u=!!i[d],l=!!a[d];u!==l&&(o=!0,u?s.add(d):s.remove(d))}}else if("styles"===n)for(var c in i){var p=i[c],f=a[c];if(p!==f)if(o=!0,p){if("string"!=typeof p)throw new Error("Style values may only be strings");e.style[c]=p}else e.style[c]=""}else if(i||"string"!=typeof a||(i=""),"value"===n)e[n]!==i&&e["oninput-value"]!==i&&(e[n]=i),i!==a&&(o=!0);else if(i!==a){var v=typeof i;if("function"===v)throw new Error("Functions may not be updated on subsequent renders (property: "+n+"). Hint: declare event handler functions outside the render() function.");"string"===v?e.setAttribute(n,i):e[n]=i,o=!0}}return o}},c=function(e,t,r){if(t)for(var o=0;o<t.length;o++)y(t[o],e,void 0,r)},p=function(e,t){return e.vnodeSelector!==t.vnodeSelector?!1:e.properties&&t.properties?e.properties.key===t.properties.key:!e.properties&&!t.properties},f=function(e,t,r){if(""!==t.vnodeSelector)for(var o=r;o<e.length;o++)if(p(e[o],t))return o;return-1},v=function(e,t){if(e.properties){var r=e.properties.enterAnimation;r&&("function"==typeof r?r(e.domNode,e.properties):t.enter(e.domNode,e.properties,r))}},m=function(e,t){var r=e.domNode;if(e.properties){var o=e.properties.exitAnimation;if(o){r.style.pointerEvents="none";var n=function(){r.parentNode&&r.parentNode.removeChild(r)};return"function"==typeof o?void o(r,n,e.properties):void t.exit(e.domNode,e.properties,o,n)}}r.parentNode&&r.parentNode.removeChild(r)},h=function(e,r,o,n){if(r===o)return!1;r=r||t,o=o||t;for(var i,a=n.transitions,s=0,d=0,u=!1;d<o.length;){var l=s<r.length?r[s]:void 0,c=o[d];if(void 0!==l&&p(l,c))u=w(l,c,n)||u,s++;else{var h=f(r,c,s+1);if(h>=0){for(i=s;h>i;i++)m(r[i],a);u=w(r[h],c,n)||u,s=h+1}else y(c,e,s<r.length?r[s].domNode:void 0,n),v(c,a)}d++}if(r.length>s)for(i=s;i<r.length;i++)m(r[i],a);return u},y=function(e,t,o,n){var i,a,s=e.vnodeSelector;if(""===s)i=e.domNode=document.createTextNode(e.text),void 0!==o?t.insertBefore(i,o):t.appendChild(i);else{var d,u=0,l="tag",c=void 0,p=s.length;for(a=0;p>a;a++){if(d=l,a===p-1)c=0===u?s:s.substr(u);else{var f=s.charAt(a);"."===f?(l="class",c=s.substring(u,a),u=a+1):"#"===f&&(l="id",c=s.substring(u,a),u=a+1)}void 0!==c&&("tag"===d?("svg"===c&&(n=r(n,{namespace:"http://www.w3.org/2000/svg"})),i=e.domNode=void 0!==n.namespace?document.createElementNS(n.namespace,c):document.createElement(c),void 0!==o?t.insertBefore(i,o):t.appendChild(i)):"class"===d?i.classList.add(c):i.id=c,c=void 0)}g(i,e,n)}},g=function(e,t,r){c(e,t.children,r),t.text&&(e.textContent=t.text),u(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate(e,r,t.vnodeSelector,t.properties,t.children)},w=function(e,t,o){var n=e.domNode;if(!n)throw new Error("previous node was not mounted");var i=!1;if(e===t)return i;var a=!1;return""===t.vnodeSelector?t.text!==e.text&&(n.nodeValue=t.text,i=!0):("svg"===t.vnodeSelector.substr(0,3)&&(o=r(o,{namespace:"http://www.w3.org/2000/svg"})),e.text!==t.text&&(i=!0,void 0===t.text?n.removeChild(n.firstChild):n.textContent=t.text),a=h(n,e.children,t.children,o),a=l(n,e.properties,t.properties,o)||a,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate(n,o,t.vnodeSelector,t.properties,t.children)),a&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(n,t.properties,e.properties),t.domNode=e.domNode,i},x=e.performance&&e.performance.now?e.performance:{offset:new Date,now:function(){return new Date-this.offset}},N={lastCreateVDom:null,lastCreateDom:null,lastUpdateVDom:null,lastUpdateDom:null,lastProjector:null,createExecuted:function(e,t,r,o){N.lastProjector=o,N.lastCreateVDom=t-e,N.lastCreateDom=r-t},updateExecuted:function(e,t,r,o){N.lastProjector=o,N.lastUpdateVDom=t-e,N.lastUpdateDom=r-t}},E=function(e,t){if(!e.vnodeSelector)throw new Error("Invalid vnode argument");return{update:function(r){if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using mergeDom with one extra level)");w(e,r,t),e=r},domNode:e.domNode}},S={h:function(e,t,r){if(2===arguments.length&&"string"==typeof e){if(Array.isArray(t))r=t,t=void 0;else if(void 0===t)throw new Error("undefined is not a valid value for properties, maybe you forgot the comma between } and [ ?")}else if("string"!=typeof e||r&&!Array.isArray(r)||void 0!==t&&"object"!=typeof t)throw new Error("Incorrect arguments passed to the h() function. Correct signature: h(string, optional object, optional array)");var o=void 0;return r&&1===r.length&&"string"==typeof r[0]?(o=r[0],r=void 0):r=a(e,r),{vnodeSelector:e,properties:t,children:r,text:o,domNode:null}},createDom:function(e,t){return t=d(t),y(e,document.createElement("div"),void 0,t),E(e,t)},appendToDom:function(e,t,r){return r=d(r),y(t,e,void 0,r),E(t,r)},mergeDom:function(e,t,r){return r=d(r),t.domNode=e,g(e,t,r),E(t,r)},createProjector:function(e,t,r){r=d(r),r.eventHandlerInterceptor=function(e,t){return function(){return s.scheduleRender(),t.apply(this,arguments)}};var o,n=void 0,i=!1,a=function(){if(o=void 0,n){var i=x.now(),a=t(),d=x.now();n.update(a),N.updateExecuted(i,d,x.now(),s)}else{var u=x.now(),l=t(),c=x.now();n=S.mergeDom(e,l,r),N.createExecuted(u,c,x.now(),s)}};o=requestAnimationFrame(a);var s={scheduleRender:function(){o||i||(o=requestAnimationFrame(a))},destroy:function(){o&&(cancelAnimationFrame(o),o=void 0),i=!0}};return s},createCache:function(){var e=void 0,t=void 0,r={invalidate:function(){t=void 0,e=void 0},result:function(r,o){if(e)for(var n=0;n<r.length;n++)e[n]!==r[n]&&(t=void 0);return t||(t=o(),e=r),t}};return r},stats:N};"undefined"!=typeof module&&module.exports?module.exports=S:"function"==typeof define&&define.amd?define(function(){return S}):window.maquette=S}(this);