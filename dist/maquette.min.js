!function(e,r){"function"==typeof define&&define.amd?define(["exports"],r):r("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:e.maquette={})}(this,function(e){var r=[],t=function(e,r){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),r&&Object.keys(r).forEach(function(e){t[e]=r[e]}),t},o=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:null===e||void 0===e?"":e.toString(),domNode:null}},n=function(e,r,t){for(var i=0;i<r.length;i++){var a=r[i];Array.isArray(a)?n(e,a,t):null!==a&&void 0!==a&&(a.hasOwnProperty("vnodeSelector")||(a=o(a)),t.push(a))}},i=function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")},a={namespace:void 0,eventHandlerInterceptor:void 0,styleApplyer:function(e,r,t){e.style[r]=t},transitions:{enter:i,exit:i}},d=function(e){return t(a,e)},s=function(e,r,t){if(r){var o=t.eventHandlerInterceptor;for(var n in r){var i=r[n];if("class"===n||"className"===n||"classList"===n)throw new Error("Property "+n+" is not supported, use 'classes' instead.");if("classes"===n)for(var a in i)i[a]&&e.classList.add(a);else if("styles"===n)for(var d in i){var s=i[d];if(s){if("string"!=typeof s)throw new Error("Style values may only be strings");t.styleApplyer(e,d,s)}}else{if("key"===n)continue;if(null===i||void 0===i)continue;var p=typeof i;"function"===p?(o&&0===n.lastIndexOf("on",0)&&(i=o(n,i,e,r),"oninput"===n&&!function(){var e=i;i=function(r){r.target["oninput-value"]=r.target.value,e.apply(this,[r])}}()),e[n]=i):"string"===p&&"value"!==n?e.setAttribute(n,i):e[n]=i}}}},p=function(e,r,t,o){if(t){var n=!1;for(var i in t){var a=t[i],d=r[i];if("classes"===i){var s=e.classList;for(var p in a){var u=!!a[p],f=!!d[p];u!==f&&(n=!0,u?s.add(p):s.remove(p))}}else if("styles"===i)for(var v in a){var c=a[v],l=d[v];if(c!==l)if(n=!0,c){if("string"!=typeof c)throw new Error("Style values may only be strings");o.styleApplyer(e,v,c)}else o.styleApplyer(e,v,"")}else if(a||"string"!=typeof d||(a=""),"value"===i)e[i]!==a&&e["oninput-value"]!==a&&(e[i]=a,e["oninput-value"]=void 0),a!==d&&(n=!0);else if(a!==d){var h=typeof a;if("function"===h)throw new Error("Functions may not be updated on subsequent renders (property: "+i+"). Hint: declare event handler functions outside the render() function.");"string"===h?e.setAttribute(i,a):e[i]!==a&&(e[i]=a),n=!0}}return n}},u=function(e,r,t){if(r)for(var o=0;o<r.length;o++)y(r[o],e,void 0,t)},f=function(e,r){return e.vnodeSelector!==r.vnodeSelector?!1:e.properties&&r.properties?e.properties.key===r.properties.key:!e.properties&&!r.properties},v=function(e,r,t){if(""!==r.vnodeSelector)for(var o=t;o<e.length;o++)if(f(e[o],r))return o;return-1},c=function(e,r){if(e.properties){var t=e.properties.enterAnimation;t&&("function"==typeof t?t(e.domNode,e.properties):r.enter(e.domNode,e.properties,t))}},l=function(e,r){var t=e.domNode;if(e.properties){var o=e.properties.exitAnimation;if(o){t.style.pointerEvents="none";var n=function(){t.parentNode&&t.parentNode.removeChild(t)};return"function"==typeof o?void o(t,n,e.properties):void r.exit(e.domNode,e.properties,o,n)}}t.parentNode&&t.parentNode.removeChild(t)},h=function(e,r,t,o){var n=e[r];if(""!==n.vnodeSelector){var i=n.properties?n.properties.key:void 0;if(!i)for(var a=0;a<e.length;a++)if(a!==r){var d=e[a];if(f(d,n))throw"added"===o?new Error(t.vnodeSelector+" had a "+n.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable."):new Error(t.vnodeSelector+" had a "+n.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.")}}},m=function(e,t,o,n,i){if(o===n)return!1;o=o||r,n=n||r;for(var a,d=o.length,s=n.length,p=i.transitions,u=0,m=0,g=!1;s>m;){var N=d>u?o[u]:void 0,x=n[m];if(void 0!==N&&f(N,x))g=w(N,x,i)||g,u++;else{var S=v(o,x,u+1);if(S>=0){for(a=u;S>a;a++)l(o[a],p),h(o,a,e,"removed");g=w(o[S],x,i)||g,u=S+1}else y(x,t,d>u?o[u].domNode:void 0,i),c(x,p),h(n,m,e,"added")}m++}if(d>u)for(a=u;d>a;a++)l(o[a],p),h(o,a,e,"removed");return g},y=function(e,r,o,n){var i,a,d,s,p,u=0,f=e.vnodeSelector;if(""===f)i=e.domNode=document.createTextNode(e.text),void 0!==o?r.insertBefore(i,o):r.appendChild(i);else{for(a=0;a<=f.length;++a)d=f.charAt(a),(a===f.length||"."===d||"#"===d)&&(s=f.charAt(u-1),p=f.slice(u,a),"."===s?i.classList.add(p):"#"===s?i.id=p:("svg"===p&&(n=t(n,{namespace:"http://www.w3.org/2000/svg"})),i=void 0!==n.namespace?e.domNode=document.createElementNS(n.namespace,p):e.domNode=document.createElement(p),void 0!==o?r.insertBefore(i,o):r.appendChild(i)),u=a+1);g(i,e,n)}},g=function(e,r,t){u(e,r.children,t),r.text&&(e.textContent=r.text),s(e,r.properties,t),r.properties&&r.properties.afterCreate&&r.properties.afterCreate(e,t,r.vnodeSelector,r.properties,r.children)},w=function(e,r,o){var n=e.domNode;if(!n)throw new Error("previous node was not rendered");var i=!1;if(e===r)return i;var a=!1;return""===r.vnodeSelector?r.text!==e.text&&(n.nodeValue=r.text,i=!0):(0===r.vnodeSelector.lastIndexOf("svg",0)&&(o=t(o,{namespace:"http://www.w3.org/2000/svg"})),e.text!==r.text&&(a=!0,void 0===r.text?n.removeChild(n.firstChild):n.textContent=r.text),a=m(r,n,e.children,r.children,o)||a,a=p(n,e.properties,r.properties,o)||a,r.properties&&r.properties.afterUpdate&&r.properties.afterUpdate(n,o,r.vnodeSelector,r.properties,r.children)),a&&r.properties&&r.properties.updateAnimation&&r.properties.updateAnimation(n,r.properties,e.properties),r.domNode=e.domNode,i},N=function(e,r){if(!e.vnodeSelector)throw new Error("Invalid vnode argument");return{update:function(t){if(e.vnodeSelector!==t.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");w(e,t,r),e=t},domNode:e.domNode}};e.h=function(e){var r=arguments[1];if("string"!=typeof e)throw new Error;var t=1;!r||r.hasOwnProperty("vnodeSelector")||Array.isArray(r)||"object"!=typeof r?r=void 0:t=2;var i=void 0,a=void 0,d=arguments.length;if(d===t+1){var s=arguments[t];"string"==typeof s?i=s:void 0!==s&&1===s.length&&"string"==typeof s[0]&&(i=s[0])}if(void 0===i)for(a=[];t<arguments.length;t++){var p=arguments[t];null!==p&&void 0!==p&&(Array.isArray(p)?n(e,p,a):p.hasOwnProperty("vnodeSelector")?a.push(p):a.push(o(p)))}return{vnodeSelector:e,properties:r,children:a,text:i,domNode:null}},e.dom={create:function(e,r){return r=d(r),y(e,document.createElement("div"),void 0,r),N(e,r)},append:function(e,r,t){return t=d(t),y(r,e,void 0,t),N(r,t)},insertBefore:function(e,r,t){return t=d(t),y(r,e.parentNode,e,t),N(r,t)},merge:function(e,r,t){return t=d(t),r.domNode=e,g(e,r,t),N(r,t)}},e.createCache=function(){var e=void 0,r=void 0,t={invalidate:function(){r=void 0,e=void 0},result:function(t,o){if(e)for(var n=0;n<t.length;n++)e[n]!==t[n]&&(r=void 0);return r||(r=o(),e=t),r}};return t},e.createMapping=function(e,r,t){var o=[],n=[];return{results:n,map:function(i){for(var a=i.map(e),d=n.slice(),s=0,p=0;p<i.length;p++){var u=i[p],f=a[p];if(f===o[s])n[p]=d[s],t(u,d[s],p),s++;else{for(var v=!1,c=1;c<o.length;c++){var l=(s+c)%o.length;if(o[l]===f){n[p]=d[l],t(i[p],d[l],p),s=l+1,v=!0;break}}v||(n[p]=r(u,p))}}n.length=i.length,o=a}}},e.createProjector=function(r){r=d(r),r.eventHandlerInterceptor=function(e,r){return function(){return p.scheduleRender(),r.apply(this,arguments)}};var t,o=!0,n=!1,i=[],a=[],s=function(){if(t=void 0,o){o=!1;for(var e=0;e<i.length;e++){var r=a[e]();i[e].update(r)}o=!0}},p={scheduleRender:function(){t||n||(t=requestAnimationFrame(s))},stop:function(){t&&(cancelAnimationFrame(t),t=void 0),n=!0},resume:function(){n=!1,o=!0,p.scheduleRender()},append:function(t,o){i.push(e.dom.append(t,o(),r)),a.push(o)},insertBefore:function(t,o){i.push(e.dom.insertBefore(t,o(),r)),a.push(o)},merge:function(t,o){i.push(e.dom.merge(t,o(),r)),a.push(o)},replace:function(e,t){var o=t();y(o,e.parentNode,e,r),e.parentNode.removeChild(e),i.push(N(o,r)),a.push(t)}};return p}});
//# sourceMappingURL=maquette.min.js.map
