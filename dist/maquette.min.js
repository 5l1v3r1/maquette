!function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):t("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:e.maquette={})}(this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version="3.0-begin";var t,r,n="http://www.w3.org/2000/svg",o=[],i=function(e,t){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),t&&Object.keys(t).forEach(function(e){r[e]=t[e]}),r},a=function(e,t){return e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties)},d=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},s=function(e,t,r){for(var n=0,o=t.length;n<o;n++){var i=t[n];Array.isArray(i)?s(e,i,r):null!==i&&void 0!==i&&("string"==typeof i&&(i=d(i)),r.push(i))}},p=function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")},c={namespace:void 0,eventHandlerInterceptor:void 0,styleApplyer:function(e,t,r){e.style[t]=r},transitions:{enter:p,exit:p}},u=function(e){return i(c,e)},f=function(e){if("string"!=typeof e)throw new Error("Style values must be strings")},l=function(e,t,r){if(t)for(var o=r.eventHandlerInterceptor,i=Object.keys(t),a=i.length,d=0;d<a;d++)!function(a){var d=i[a],s=t[d];if("className"===d)throw new Error('Property "className" is not supported, use "class".');if("class"===d)s.split(/\s+/).forEach(function(t){return e.classList.add(t)});else if("classes"===d)for(var p=Object.keys(s),c=p.length,u=0;u<c;u++){var l=p[u];s[l]&&e.classList.add(l)}else if("styles"===d)for(var v=Object.keys(s),h=v.length,u=0;u<h;u++){var m=v[u],y=s[m];y&&(f(y),r.styleApplyer(e,m,y))}else if("key"!==d&&null!==s&&void 0!==s){var g=typeof s;"function"===g?0===d.lastIndexOf("on",0)&&(o&&(s=o(d,s,e,t)),"oninput"===d&&function(){var e=s;s=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value}}(),e[d]=s):"string"===g&&"value"!==d&&"innerHTML"!==d?r.namespace===n&&"href"===d?e.setAttributeNS("http://www.w3.org/1999/xlink",d,s):e.setAttribute(d,s):e[d]=s}}(d)},v=function(e,t,r,o){if(r){for(var i=!1,a=Object.keys(r),d=a.length,s=0;s<d;s++){var p=a[s],c=r[p],u=t[p];if("class"===p){if(u!==c)throw new Error('"class" property may not be updated. Use the "classes" property for conditional css classes.')}else if("classes"===p)for(var l=e.classList,v=Object.keys(c),h=v.length,m=0;m<h;m++){var y=v[m],g=!!c[y];g!==!!u[y]&&(i=!0,g?l.add(y):l.remove(y))}else if("styles"===p)for(var N=Object.keys(c),w=N.length,m=0;m<w;m++){var b=N[m],x=c[b];x!==u[b]&&(i=!0,x?(f(x),o.styleApplyer(e,b,x)):o.styleApplyer(e,b,""))}else if(c||"string"!=typeof u||(c=""),"value"===p){var A=e[p];A!==c&&(e["oninput-value"]?A===e["oninput-value"]:c!==u)&&(e[p]=c,e["oninput-value"]=void 0),c!==u&&(i=!0)}else if(c!==u){var S=typeof c;"function"===S&&o.eventHandlerInterceptor||("string"===S&&"innerHTML"!==p?o.namespace===n&&"href"===p?e.setAttributeNS("http://www.w3.org/1999/xlink",p,c):"role"===p&&""===c?e.removeAttribute(p):e.setAttribute(p,c):e[p]!==c&&(e[p]=c),i=!0)}}return i}},h=function(e,t,r){if(""!==t.vnodeSelector)for(var n=r;n<e.length;n++)if(a(e[n],t))return n;return-1},m=function(e,t){if(e.properties){var r=e.properties.enterAnimation;r&&("function"==typeof r?r(e.domNode,e.properties):t.enter(e.domNode,e.properties,r))}},y=function(e,t){var r=e.domNode;if(e.properties){var n=e.properties.exitAnimation;if(n){r.style.pointerEvents="none";var o=function(){r.parentNode&&r.parentNode.removeChild(r)};return"function"==typeof n?void n(r,o,e.properties):void t.exit(e.domNode,e.properties,n,o)}}r.parentNode&&r.parentNode.removeChild(r)},g=function(e,t,r,n){var o=e[t];if(""!==o.vnodeSelector){var i=o.properties;if(!(i?void 0===i.key?i.bind:i.key:void 0))for(var d=0;d<e.length;d++)if(d!==t){var s=e[d];if(a(s,o))throw"added"===n?new Error(r.vnodeSelector+" had a "+o.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable."):new Error(r.vnodeSelector+" had a "+o.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.")}}},N=function(e,n,i,d,s){if(i===d)return!1;i=i||o,d=d||o;for(var p,c=i.length,u=d.length,f=s.transitions,l=0,v=0,N=!1;v<u;){var w=l<c?i[l]:void 0,b=d[v];if(void 0!==w&&a(w,b))N=r(w,b,s)||N,l++;else{var x=h(i,b,l+1);if(x>=0){for(p=l;p<x;p++)y(i[p],f),g(i,p,e,"removed");N=r(i[x],b,s)||N,l=x+1}else t(b,n,l<c?i[l].domNode:void 0,s),m(b,f),g(d,v,e,"added")}v++}if(c>l)for(p=l;p<c;p++)y(i[p],f),g(i,p,e,"removed");return N},w=function(e,r,n){if(r)for(var o=0;o<r.length;o++)t(r[o],e,void 0,n)},b=function(e,t,r){w(e,t.children,r),t.text&&(e.textContent=t.text),l(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])};t=function(e,t,r,o){var a,d,s,p,c,u=0,f=e.vnodeSelector,l=t.ownerDocument;if(""===f)a=e.domNode=l.createTextNode(e.text),void 0!==r?t.insertBefore(a,r):t.appendChild(a);else{for(d=0;d<=f.length;++d)s=f.charAt(d),d!==f.length&&"."!==s&&"#"!==s||(p=f.charAt(u-1),c=f.slice(u,d),"."===p?a.classList.add(c):"#"===p?a.id=c:("svg"===c&&(o=i(o,{namespace:n})),void 0!==o.namespace?a=e.domNode=l.createElementNS(o.namespace,c):(a=e.domNode=e.domNode||l.createElement(c),"input"===c&&e.properties&&void 0!==e.properties.type&&a.setAttribute("type",e.properties.type)),void 0!==r?t.insertBefore(a,r):a.parentNode!==t&&t.appendChild(a)),u=d+1);b(a,e,o)}},r=function(e,t,r){var o=e.domNode,a=!1;if(e===t)return!1;var d=!1;if(""===t.vnodeSelector){if(t.text!==e.text){var s=o.ownerDocument.createTextNode(t.text);return o.parentNode.replaceChild(s,o),t.domNode=s,a=!0}}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(r=i(r,{namespace:n})),e.text!==t.text&&(d=!0,void 0===t.text?o.removeChild(o.firstChild):o.textContent=t.text),d=N(t,o,e.children,t.children,r)||d,d=v(o,e.properties,t.properties,r)||d,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[o,r,t.vnodeSelector,t.properties,t.children]);return d&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(o,t.properties,e.properties),t.domNode=e.domNode,a};var x=function(e,t){return{getLastRender:function(){return e},update:function(n){if(e.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");r(e,n,t),e=n},domNode:e.domNode}};e.h=function(e,t,r){Array.isArray(t)&&(r=t,t=void 0);var n,o;return void 0!==r&&1===r.length&&"string"==typeof r[0]?n=r[0]:r&&(s(e,r,o=[]),0===o.length&&(o=void 0)),{vnodeSelector:e,properties:t,children:o,text:""===n?void 0:n,domNode:null}},e.dom={create:function(e,r){return r=u(r),t(e,document.createElement("div"),void 0,r),x(e,r)},append:function(e,r,n){return n=u(n),t(r,e,void 0,n),x(r,n)},insertBefore:function(e,r,n){return n=u(n),t(r,e.parentNode,e,n),x(r,n)},merge:function(e,t,r){return r=u(r),t.domNode=e,b(e,t,r),x(t,r)},replace:function(e,r,n){return n=u(n),t(r,e.parentNode,e,n),e.parentNode.removeChild(e),x(r,n)}},e.createCache=function(){var e,t;return{invalidate:function(){t=void 0,e=void 0},result:function(r,n){if(e)for(var o=0;o<r.length;o++)e[o]!==r[o]&&(t=void 0);return t||(t=n(),e=r),t}}},e.createMapping=function(e,t,r){var n=[],o=[];return{results:o,map:function(i){for(var a=i.map(e),d=o.slice(),s=0,p=0;p<i.length;p++){var c=i[p],u=a[p];if(u===n[s])o[p]=d[s],r(c,d[s],p),s++;else{for(var f=!1,l=1;l<n.length+1;l++){var v=(s+l)%n.length;if(n[v]===u){o[p]=d[v],r(i[p],d[v],p),s=v+1,f=!0;break}}f||(o[p]=t(c,p))}}o.length=i.length,n=a}}};var A=function(e,t){for(var r=[];e!==t;)r.push(e),e=e.parentNode;return r},S=function(e,t){return t.forEach(function(t){e=e.children.find(function(e){return e.domNode===t})}),e},k=function(e,t){var r=function(r){var n=t(),o=A(r.currentTarget,n.domNode),i=S(n.getLastRender(),o.reverse());return e.scheduleRender(),i.properties["on"+r.type].apply(i.properties.bind||this,arguments)};return function(e,t,n,o){return r}};e.createProjector=function(t){var r,n,o=u(t),i=!0,a=!1,d=[],s=[],p=function(e,t,n){var i;o.eventHandlerInterceptor=k(r,function(){return i}),i=e(t,n(),o),d.push(i),s.push(n)},c=function(){if(n=void 0,i){i=!1;for(var e=0;e<d.length;e++){var t=s[e]();d[e].update(t)}i=!0}};return r={renderNow:c,scheduleRender:function(){n||a||(n=requestAnimationFrame(c))},stop:function(){n&&(cancelAnimationFrame(n),n=void 0),a=!0},resume:function(){a=!1,i=!0,r.scheduleRender()},append:function(t,r){p(e.dom.append,t,r)},insertBefore:function(t,r){p(e.dom.insertBefore,t,r)},merge:function(t,r){p(e.dom.merge,t,r)},replace:function(t,r){p(e.dom.replace,t,r)},detach:function(e){for(var t=0;t<s.length;t++)if(s[t]===e)return s.splice(t,1),d.splice(t,1)[0];throw new Error("renderFunction was not found")}}}});
//# sourceMappingURL=maquette.min.js.map
