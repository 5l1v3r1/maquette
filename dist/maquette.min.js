!function(e){"use strict";var t=function(){},r=[],n=function(e,t){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),t&&Object.keys(t).forEach(function(e){r[e]=t[e]}),r},o=function(e,t,r,n,s){for(var u=0;u<t.length;u++){var d=t[u];Array.isArray(d)?n=o(e,d,r,n,s):null!==d&&void 0!==d&&(d.hasOwnProperty("vnodeSelector")?i(e,d,s):d=a(d),r.splice(n,0,d),n++)}return n},i=function(e,t,r){var n=t.vnodeSelector;if(!(""===n||t.properties&&t.properties.key)){for(var o=0;o<r.length;o++)if(n===r[o])throw new Error("["+e+"] contains indistinguishable child nodes ["+n+"], please add unique key properties.");r.push(n)}},a=function(e){return{vnodeSelector:"",text:null===e||void 0===e?"":e.toString(),domNode:null}},s=function(e,t){if(null===t||void 0===t)return null;if(!Array.isArray(t))return t.hasOwnProperty("vnodeSelector")?[t]:[a(t)];for(var r=0,n=[];r<t.length;){var s=t[r];null===s||void 0===s?t.splice(r,1):Array.isArray(s)?(t.splice(r,1),r=o(e,s,t,r,n)):s.hasOwnProperty("vnodeSelector")?(i(e,s,n),r++):(t[r]=a(s),r++)}return t},u=/([\.#]?[a-zA-Z0-9_:-]+)/,d={namespace:null,transitions:{enter:function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")},exit:function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")}}},l=function(e){return n(d,e)},c=function(e,t,r){if(t){var n=r.eventHandlerInterceptor;for(var o in t){var i=t[o];if("class"===o||"className"===o||"classList"===o)throw new Error("Property "+a+" is not supported, use 'classes' instead.");if("classes"===o)for(var a in i)i[a]&&e.classList.add(a);else{if("key"===o)continue;if(null===i||void 0===i)continue;var s=typeof i;"function"===s?(n&&0===o.lastIndexOf("on",0)&&(i=n(o,i,e),"oninput"===o&&!function(){var e=i;i=function(t){t.target["oninput-value"]=t.target.value,e.apply(this,[t])}}()),e[o]=i):"string"===s&&"value"!==o?e.setAttribute(o,i):e[o]=i}}}},p=function(e,t,r){if(r){var n=!1;for(var o in r){var i=r[o],a=t[o];if("classes"===o){var s=e.classList;for(var u in i){var d=!!i[u],l=!!a[u];d!==l&&(n=!0,d?s.add(u):s.remove(u))}}else if(i||"string"!=typeof a||(i=""),"value"===o)e[o]!==i&&e["oninput-value"]!==i&&(e[o]=i),i!==a&&(n=!0);else if(i!==a){var c=typeof i;if("function"===c)throw new Error("Functions may not be updated on subsequent renders (property: "+o+"). Hint: declare event handler functions outside the render() function.");"string"===c?e.setAttribute(o,i):e[o]=i,n=!0}}return n}},f=function(e,t,r){if(t){if(1===t.length&&""===t[0].vnodeSelector)return e.textContent=t[0].text,void(t[0].domNode=e.firstChild);var n=function(t){e.appendChild(t)};t.forEach(function(e){g(e,n,r)})}},v=function(e,t){return e.vnodeSelector!==t.vnodeSelector?!1:e.properties&&t.properties?e.properties.key===t.properties.key:!e.properties&&!t.properties},m=function(e,t,r){if(""!==t.vnodeSelector)for(var n=r;n<e.length;n++)if(v(e[n],t))return n;return-1},h=function(e,t){if(e.properties){var r=e.properties.enterAnimation;r&&("function"==typeof r?r(e.domNode,e.properties):t.enter(e.domNode,e.properties,r))}},w=function(e,t){var r=e.domNode;if(e.properties){var n=e.properties.exitAnimation;if(n){var o=function(){r.parentNode&&r.parentNode.removeChild(r)};return"function"==typeof n?void n(r,o,e.properties):void t.exit(e.domNode,e.properties,n,o)}}r.parentNode.removeChild(r)},y=function(e,t,n,o){if(t!==n){t=t||r,n=n||r;for(var i,a=o.transitions,s=0,u=0,d=!1,l=function(r){if(s<t.length){var n=t[s];e.insertBefore(r,n.domNode)}else e.appendChild(r)};u<n.length;){var c=s<t.length?t[s]:null,p=n[u];if(c&&v(c,p))d=d||A(c,p,o),s++;else{var f=m(t,p,s+1);if(f>=0){for(i=s;f>i;i++)w(t[i],a);d=d||A(t[f],p,o),s=f+1}else g(p,l,o),h(p,a)}u++}if(t.length>s)for(i=s;i<t.length;i++)w(t[i],a);return d}},g=function(e,t,r){if(""===e.vnodeSelector)e.domNode=document.createTextNode(e.text),t(e.domNode);else{var o,i,a,s,d=e.vnodeSelector.split(u);for(a=0;a<d.length;a++)i=d[a],i&&(o?(s=i.charAt(0),"."===s?o.classList.add(i.substring(1)):"#"===s&&(o.id=i.substr(1))):("svg"===i&&(r=n(r,{namespace:"http://www.w3.org/2000/svg"})),o=e.domNode=r.namespace?document.createElementNS(r.namespace,i):document.createElement(i),t(o)));N(o,e,r)}},N=function(e,t,r){f(e,t.children,r),c(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate(e,r,t.vnodeSelector,t.properties,t.children)},A=function(e,t,r){var o=e.domNode;if(!o)throw new Error("previous node was not mounted");var i=!1;if(e===t)return i;var a=!1;return""===t.vnodeSelector?t.text!==e.text&&(o.nodeValue=t.text,i=!0):("svg"===t.vnodeSelector.substr(0,3)&&(r=n(r,{namespace:"http://www.w3.org/2000/svg"})),a=y(o,e.children,t.children,r),a=a||p(o,e.properties,t.properties,r),t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate(o,r,t.vnodeSelector,t.properties,t.children)),a&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(o,t.properties,e.properties),t.domNode=e.domNode,i},S=e.performance&&e.performance.now?e.performance:{offset:new Date,now:function(){return new Date-this.offset}},x={lastCreateVDom:null,lastCreateDom:null,lastUpdateVDom:null,lastUpdateDom:null,lastProjector:null,createExecuted:function(e,t,r,n){x.lastProjector=n,x.lastCreateVDom=t-e,x.lastCreateDom=r-t},updateExecuted:function(e,t,r,n){x.lastProjector=n,x.lastUpdateVDom=t-e,x.lastUpdateDom=r-t}},E=function(e,t){return{update:function(r){if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using mergeDom with one extra level)");A(e,r,t),e=r},domNode:e.domNode}},C={h:function(e,t,r){if(!r&&Array.isArray(t)&&"string"==typeof e)r=t,t=void 0;else if("string"!=typeof e||r&&!Array.isArray(r)||void 0!==t&&"object"!=typeof t)throw new Error("Incorrect arguments passed to the h() function. Correct signature: h(string, optional object, optional array)");return r=s(e,r),{vnodeSelector:e,properties:t,children:r,domNode:null}},createDom:function(e,r){return r=l(r),g(e,t,r),E(e,r)},appendToDom:function(e,t,r){r=l(r);var n=e.appendChild?function(t){e.appendChild(t)}:e;return g(t,n,r),E(t,r)},mergeDom:function(e,t,r){return r=l(r),t.domNode=e,N(e,t,r),E(t,r)},createProjector:function(e,t,r){r=l(r),r.eventHandlerInterceptor=function(e,t){return function(){return s.scheduleRender(),t.apply(this,arguments)}};var n,o=null,i=!1,a=function(){if(n=null,o){var i=S.now(),a=t(),u=S.now();o.update(a),x.updateExecuted(i,u,S.now(),s)}else{var d=S.now(),l=t(),c=S.now();o=C.mergeDom(e,l,r),x.createExecuted(d,c,S.now(),s)}};n=requestAnimationFrame(a);var s={scheduleRender:function(){n||i||(n=requestAnimationFrame(a))},destroy:function(){n&&(cancelAnimationFrame(n),n=null),i=!0}};return s},createCache:function(){var e=null,t=null,r={invalidate:function(){t=null,e=null},result:function(r,n){if(e)for(var o=0;o<r.length;o++)e[o]!==r[o]&&(t=null);return t||(t=n(),e=r),t}};return r},stats:x};"undefined"!=typeof module&&module.exports?module.exports=C:"function"==typeof define&&define.amd?define(function(){return C}):window.maquette=C}(this);