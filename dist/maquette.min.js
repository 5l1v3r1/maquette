!function(){"use strict";var e=[],r=function(e,r){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),r&&Object.keys(r).forEach(function(e){t[e]=r[e]}),t},t=function(e,r,o,i){for(var a=0;a<r.length;a++){var d=r[a];Array.isArray(d)?i=t(e,d,o,i):null!==d&&void 0!==d&&(d.hasOwnProperty("vnodeSelector")||(d=n(d)),o.splice(i,0,d),i++)}return i},n=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:null===e||void 0===e?"":e.toString(),domNode:null}},o=function(e,r){if(null===r||void 0===r)return void 0;if(!Array.isArray(r))return r.hasOwnProperty("vnodeSelector")?[r]:[n(r)];for(var o=0;o<r.length;){var i=r[o];null===i||void 0===i?r.splice(o,1):Array.isArray(i)?(r.splice(o,1),o=t(e,i,r,o)):i.hasOwnProperty("vnodeSelector")?o++:(r[o]=n(i),o++)}return r},i={namespace:void 0,transitions:{enter:function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")},exit:function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")}}},a=function(e){return r(i,e)},d=function(e,r,t){if(r){var n=t.eventHandlerInterceptor;for(var o in r){var i=r[o];if("class"===o||"className"===o||"classList"===o)throw new Error("Property "+a+" is not supported, use 'classes' instead.");if("classes"===o)for(var a in i)i[a]&&e.classList.add(a);else if("styles"===o)for(var d in i){var s=i[d];if(s){if("string"!=typeof s)throw new Error("Style values may only be strings");e.style[d]=s}}else{if("key"===o)continue;if(null===i||void 0===i)continue;var u=typeof i;"function"===u?(n&&0===o.lastIndexOf("on",0)&&(i=n(o,i,e,r),"oninput"===o&&!function(){var e=i;i=function(r){r.target["oninput-value"]=r.target.value,e.apply(this,[r])}}()),e[o]=i):"string"===u&&"value"!==o?e.setAttribute(o,i):e[o]=i}}}},s=function(e,r,t){if(t){var n=!1;for(var o in t){var i=t[o],a=r[o];if("classes"===o){var d=e.classList;for(var s in i){var u=!!i[s],p=!!a[s];u!==p&&(n=!0,u?d.add(s):d.remove(s))}}else if("styles"===o)for(var c in i){var f=i[c],l=a[c];if(f!==l)if(n=!0,f){if("string"!=typeof f)throw new Error("Style values may only be strings");e.style[c]=f}else e.style[c]=""}else if(i||"string"!=typeof a||(i=""),"value"===o)e[o]!==i&&e["oninput-value"]!==i&&(e[o]=i),i!==a&&(n=!0);else if(i!==a){var v=typeof i;if("function"===v)throw new Error("Functions may not be updated on subsequent renders (property: "+o+"). Hint: declare event handler functions outside the render() function.");"string"===v?e.setAttribute(o,i):e[o]=i,n=!0}}return n}},u=function(e,r,t){if(r)for(var n=0;n<r.length;n++)m(r[n],e,void 0,t)},p=function(e,r){return e.vnodeSelector!==r.vnodeSelector?!1:e.properties&&r.properties?e.properties.key===r.properties.key:!e.properties&&!r.properties},c=function(e,r,t){if(""!==r.vnodeSelector)for(var n=t;n<e.length;n++)if(p(e[n],r))return n;return-1},f=function(e,r){if(e.properties){var t=e.properties.enterAnimation;t&&("function"==typeof t?t(e.domNode,e.properties):r.enter(e.domNode,e.properties,t))}},l=function(e,r){var t=e.domNode;if(e.properties){var n=e.properties.exitAnimation;if(n){t.style.pointerEvents="none";var o=function(){t.parentNode&&t.parentNode.removeChild(t)};return"function"==typeof n?void n(t,o,e.properties):void r.exit(e.domNode,e.properties,n,o)}}t.parentNode&&t.parentNode.removeChild(t)},v=function(e,r,t,n){var o=e[r];if(""!==o.vnodeSelector){var i=o.properties?o.properties.key:void 0;if(!i)for(var a=0;a<e.length;a++)if(a!==r){var d=e[a];if(p(d,o))throw new Error("added"===n?t.vnodeSelector+" had a "+o.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable.":t.vnodeSelector+" had a "+o.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.")}}},h=function(r,t,n,o,i){if(n===o)return!1;n=n||e,o=o||e;for(var a,d=i.transitions,s=0,u=0,h=!1;u<o.length;){var y=s<n.length?n[s]:void 0,w=o[u];if(void 0!==y&&p(y,w))h=g(y,w,i)||h,s++;else{var N=c(n,w,s+1);if(N>=0){for(a=s;N>a;a++)l(n[a],d),v(n,a,r,"removed");h=g(n[N],w,i)||h,s=N+1}else m(w,t,s<n.length?n[s].domNode:void 0,i),f(w,d),v(o,u,r,"added")}u++}if(n.length>s)for(a=s;a<n.length;a++)l(n[a],d),v(n,a,r,"removed");return h},m=function(e,t,n,o){var i,a,d,s,u,p=0,c=e.vnodeSelector;if(""===c)i=e.domNode=document.createTextNode(e.text),void 0!==n?t.insertBefore(i,n):t.appendChild(i);else{for(a=0;a<=c.length;++a)d=c.charAt(a),(a===c.length||"."===d||"#"===d)&&(s=c.charAt(p-1),u=c.slice(p,a),"."===s?i.classList.add(u):"#"===s?i.id=u:("svg"===u&&(o=r(o,{namespace:"http://www.w3.org/2000/svg"})),i=e.domNode=void 0!==o.namespace?document.createElementNS(o.namespace,u):document.createElement(u),void 0!==n?t.insertBefore(i,n):t.appendChild(i)),p=a+1);y(i,e,o)}},y=function(e,r,t){u(e,r.children,t),r.text&&(e.textContent=r.text),d(e,r.properties,t),r.properties&&r.properties.afterCreate&&r.properties.afterCreate(e,t,r.vnodeSelector,r.properties,r.children)},g=function(e,t,n){var o=e.domNode;if(!o)throw new Error("previous node was not rendered");var i=!1;if(e===t)return i;var a=!1;return""===t.vnodeSelector?t.text!==e.text&&(o.nodeValue=t.text,i=!0):("svg"===t.vnodeSelector.substr(0,3)&&(n=r(n,{namespace:"http://www.w3.org/2000/svg"})),e.text!==t.text&&(i=!0,void 0===t.text?o.removeChild(o.firstChild):o.textContent=t.text),a=h(t,o,e.children,t.children,n),a=s(o,e.properties,t.properties,n)||a,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate(o,n,t.vnodeSelector,t.properties,t.children)),a&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(o,t.properties,e.properties),t.domNode=e.domNode,i},w=function(e,r){if(!e.vnodeSelector)throw new Error("Invalid vnode argument");return{update:function(t){if(e.vnodeSelector!==t.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using mergeDom with one extra level)");g(e,t,r),e=t},domNode:e.domNode}},N={h:function(e,r,t){if(2===arguments.length&&"string"==typeof e){if(Array.isArray(r))t=r,r=void 0;else if(void 0===r)throw new Error("undefined is not a valid value for properties, maybe you forgot the comma between } and [ ?")}else if("string"!=typeof e||t&&!Array.isArray(t)||void 0!==r&&"object"!=typeof r)throw new Error("Incorrect arguments passed to the h() function. Correct signature: h(string, optional object, optional array)");var n=void 0;return t&&1===t.length&&"string"==typeof t[0]?(n=t[0],t=void 0):t=o(e,t),{vnodeSelector:e,properties:r,children:t,text:n,domNode:null}},dom:{create:function(e,r){return r=a(r),m(e,document.createElement("div"),void 0,r),w(e,r)},append:function(e,r,t){return t=a(t),m(r,e,void 0,t),w(r,t)},insertBefore:function(e,r,t){return t=a(t),m(r,e.parentNode,e,t),w(r,t)},merge:function(e,r,t){return t=a(t),r.domNode=e,y(e,r,t),w(r,t)}},createMaquette1Projector:function(e,r,t){t=a(t),t.eventHandlerInterceptor=function(e,r){return function(){return s.scheduleRender(),r.apply(this,arguments)}};var n,o=void 0,i=!1,d=function(){if(n=void 0,o){var i=r();o.update(i)}else{var a=r();o=N.mergeDom(e,a,t)}};n=requestAnimationFrame(d);var s={scheduleRender:function(){n||i||(n=requestAnimationFrame(d))},destroy:function(){n&&(cancelAnimationFrame(n),n=void 0),i=!0}};return s},createCache:function(){var e=void 0,r=void 0,t={invalidate:function(){r=void 0,e=void 0},result:function(t,n){if(e)for(var o=0;o<t.length;o++)e[o]!==t[o]&&(r=void 0);return r||(r=n(),e=t),r}};return t},createMapping:function(e,r,t){var n=[],o=[];return{results:o,map:function(i){for(var a=i.map(e),d=o.slice(),s=0,u=0;u<i.length;u++){var p=i[u],c=a[u];if(c===n[s])o[u]=d[s],t(p,d[s],u),s++;else{for(var f=!1,l=1;l<n.length;l++){var v=(s+l)%n.length;if(n[v]===c){o[u]=d[v],t(i[u],d[v],u),s=v+1,f=!0;break}}f||(o[u]=r(p,u))}}o.length=i.length,n=a}}},createProjector:function(e){e=a(e),e.eventHandlerInterceptor=function(e,r){return function(){return s.scheduleRender(),r.apply(this,arguments)}};var r,t=!0,n=!1,o=[],i=[],d=function(){if(r=void 0,t){t=!1;for(var e=0;e<o.length;e++){var n=i[e]();o[e].update(n)}t=!0}},s={scheduleRender:function(){r||n||(r=requestAnimationFrame(d))},stop:function(){r&&(cancelAnimationFrame(r),r=void 0),n=!0},resume:function(){n=!1,t=!0,s.scheduleRender()},evaluateHyperscript:function(r,t){var n=r.querySelectorAll("script[type='text/hyperscript']"),a=["maquette","h","enhancer"],d=[N,N.h,s];Object.keys(t).forEach(function(e){a.push(e),d.push(t[e])}),Array.prototype.forEach.call(n,function(r){var t=new Function(a,"return "+r.textContent.trim()),n=function(){return t.apply(void 0,d)};o.push(N.appendToDom(r.parentNode,n(),e)),i.push(n)})},append:function(r,t){o.push(N.dom.append(r,t(),e)),i.push(t)},insertBefore:function(r,t){o.push(N.dom.insertBefore(r,t(),e)),i.push(t)},merge:function(r,t){o.push(N.dom.merge(r,t(),e)),i.push(t)},replace:function(r,t){var n=t();m(n,r.parentNode,r,e),r.parentNode.removeChild(r),o.push(w(n,e)),i.push(t)}};return s}};"undefined"!=typeof module&&module.exports?module.exports=N:"function"==typeof define&&define.amd?define(function(){return N}):window.maquette=N}(this);