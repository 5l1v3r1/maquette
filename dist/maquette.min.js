!function(e,r){"function"==typeof define&&define.amd?define(["exports"],r):r("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:e.maquette={})}(this,function(e){"use strict";var r,t,o="http://www.w3.org/2000/svg",n=[],i=function(e,r){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),r&&Object.keys(r).forEach(function(e){t[e]=r[e]}),t},a=function(e,r){return e.vnodeSelector!==r.vnodeSelector?!1:e.properties&&r.properties?e.properties.key!==r.properties.key?!1:e.properties.bind===r.properties.bind:!e.properties&&!r.properties},s=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},d=function(e,r,t){for(var o=0;o<r.length;o++){var n=r[o];Array.isArray(n)?d(e,n,t):null!==n&&void 0!==n&&(n.hasOwnProperty("vnodeSelector")||(n=s(n)),t.push(n))}},p=function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")},c={namespace:void 0,eventHandlerInterceptor:void 0,styleApplyer:function(e,r,t){e.style[r]=t},transitions:{enter:p,exit:p}},u=function(e){return i(c,e)},l=function(e){if("string"!=typeof e)throw new Error("Style values must be strings")},f=function(e,r,t){if(r)for(var o=t.eventHandlerInterceptor,n=Object.keys(r),i=n.length,a=0;i>a;a++){var s=n[a],d=r[s];if("className"===s)throw new Error('Property "className" is not supported, use "class".');if("class"===s)e.className?e.className+=" "+d:e.className=d;else if("classes"===s)for(var p=Object.keys(d),c=p.length,u=0;c>u;u++){var f=p[u];d[f]&&e.classList.add(f)}else if("styles"===s)for(var v=Object.keys(d),h=v.length,u=0;h>u;u++){var m=v[u],y=d[m];y&&(l(y),t.styleApplyer(e,m,y))}else{if("key"===s)continue;if(null===d||void 0===d)continue;var g=typeof d;"function"===g?o&&0===s.lastIndexOf("on",0)&&(d=o(s,d,e,r),"oninput"===s&&!function(){var e=d;d=function(r){r.target["oninput-value"]=r.target.value,e.apply(this,[r])}}(),e[s]=d):"string"===g&&"value"!==s&&"innerHTML"!==s?e.setAttribute(s,d):e[s]=d}}},v=function(e,r,t,o){if(t){for(var n=!1,i=Object.keys(t),a=i.length,s=0;a>s;s++){var d=i[s],p=t[d],c=r[d];if("class"===d){if(c!==p)throw new Error('"class" property may not be updated. Use the "classes" property for conditional css classes.')}else if("classes"===d)for(var u=e.classList,f=Object.keys(p),v=f.length,h=0;v>h;h++){var m=f[h],y=!!p[m],g=!!c[m];y!==g&&(n=!0,y?u.add(m):u.remove(m))}else if("styles"===d)for(var N=Object.keys(p),b=N.length,h=0;b>h;h++){var w=N[h],x=p[w],S=c[w];x!==S&&(n=!0,x?(l(x),o.styleApplyer(e,w,x)):o.styleApplyer(e,w,""))}else if(p||"string"!=typeof c||(p=""),"value"===d)e[d]!==p&&e["oninput-value"]!==p&&(e[d]=p,e["oninput-value"]=void 0),p!==c&&(n=!0);else if(p!==c){var A=typeof p;if("function"===A)throw new Error("Functions may not be updated on subsequent renders (property: "+d+"). Hint: declare event handler functions outside the render() function.");"string"===A&&"innerHTML"!==d?e.setAttribute(d,p):e[d]!==p&&(e[d]=p),n=!0}}return n}},h=function(e,r,t){if(""!==r.vnodeSelector)for(var o=t;o<e.length;o++)if(a(e[o],r))return o;return-1},m=function(e,r){if(e.properties){var t=e.properties.enterAnimation;t&&("function"==typeof t?t(e.domNode,e.properties):r.enter(e.domNode,e.properties,t))}},y=function(e,r){var t=e.domNode;if(e.properties){var o=e.properties.exitAnimation;if(o){t.style.pointerEvents="none";var n=function(){t.parentNode&&t.parentNode.removeChild(t)};return"function"==typeof o?void o(t,n,e.properties):void r.exit(e.domNode,e.properties,o,n)}}t.parentNode&&t.parentNode.removeChild(t)},g=function(e,r,t,o){var n=e[r];if(""!==n.vnodeSelector){var i=n.properties?n.properties.key||n.properties.bind:void 0;if(!i)for(var s=0;s<e.length;s++)if(s!==r){var d=e[s];if(a(d,n))throw"added"===o?new Error(t.vnodeSelector+" had a "+n.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable."):new Error(t.vnodeSelector+" had a "+n.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.")}}},N=function(e,o,i,s,d){if(i===s)return!1;i=i||n,s=s||n;for(var p,c=i.length,u=s.length,l=d.transitions,f=0,v=0,N=!1;u>v;){var b=c>f?i[f]:void 0,w=s[v];if(void 0!==b&&a(b,w))N=t(b,w,d)||N,f++;else{var x=h(i,w,f+1);if(x>=0){for(p=f;x>p;p++)y(i[p],l),g(i,p,e,"removed");N=t(i[x],w,d)||N,f=x+1}else r(w,o,c>f?i[f].domNode:void 0,d),m(w,l),g(s,v,e,"added")}v++}if(c>f)for(p=f;c>p;p++)y(i[p],l),g(i,p,e,"removed");return N},b=function(e,t,o){if(t)for(var n=0;n<t.length;n++)r(t[n],e,void 0,o)},w=function(e,r,t){b(e,r.children,t),r.text&&(e.textContent=r.text),f(e,r.properties,t),r.properties&&r.properties.afterCreate&&r.properties.afterCreate(e,t,r.vnodeSelector,r.properties,r.children)};r=function(e,r,t,n){var a,s,d,p,c,u=0,l=e.vnodeSelector;if(""===l)a=e.domNode=document.createTextNode(e.text),void 0!==t?r.insertBefore(a,t):r.appendChild(a);else{for(s=0;s<=l.length;++s)d=l.charAt(s),s!==l.length&&"."!==d&&"#"!==d||(p=l.charAt(u-1),c=l.slice(u,s),"."===p?a.classList.add(c):"#"===p?a.id=c:("svg"===c&&(n=i(n,{namespace:o})),a=void 0!==n.namespace?e.domNode=document.createElementNS(n.namespace,c):e.domNode=document.createElement(c),void 0!==t?r.insertBefore(a,t):r.appendChild(a)),u=s+1);w(a,e,n)}},t=function(e,r,t){var n=e.domNode,a=!1;if(e===r)return a;var s=!1;if(""===r.vnodeSelector){if(r.text!==e.text){var d=document.createTextNode(r.text);return n.parentNode.replaceChild(d,n),r.domNode=d,a=!0}}else 0===r.vnodeSelector.lastIndexOf("svg",0)&&(t=i(t,{namespace:o})),e.text!==r.text&&(s=!0,void 0===r.text?n.removeChild(n.firstChild):n.textContent=r.text),s=N(r,n,e.children,r.children,t)||s,s=v(n,e.properties,r.properties,t)||s,r.properties&&r.properties.afterUpdate&&r.properties.afterUpdate(n,t,r.vnodeSelector,r.properties,r.children);return s&&r.properties&&r.properties.updateAnimation&&r.properties.updateAnimation(n,r.properties,e.properties),r.domNode=e.domNode,a};var x=function(e,r){return{update:function(o){if(e.vnodeSelector!==o.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");t(e,o,r),e=o},domNode:e.domNode}};e.h=function(e){var r=arguments[1];if("string"!=typeof e)throw new Error;var t=1;!r||r.hasOwnProperty("vnodeSelector")||Array.isArray(r)||"object"!=typeof r?r=void 0:t=2;var o=void 0,n=void 0,i=arguments.length;if(i===t+1){var a=arguments[t];"string"==typeof a?o=a:void 0!==a&&1===a.length&&"string"==typeof a[0]&&(o=a[0])}if(void 0===o)for(n=[];t<arguments.length;t++){var p=arguments[t];null!==p&&void 0!==p&&(Array.isArray(p)?d(e,p,n):p.hasOwnProperty("vnodeSelector")?n.push(p):n.push(s(p)))}return{vnodeSelector:e,properties:r,children:n,text:o,domNode:null}},e.dom={create:function(e,t){return t=u(t),r(e,document.createElement("div"),void 0,t),x(e,t)},append:function(e,t,o){return o=u(o),r(t,e,void 0,o),x(t,o)},insertBefore:function(e,t,o){return o=u(o),r(t,e.parentNode,e,o),x(t,o)},merge:function(e,r,t){return t=u(t),r.domNode=e,w(e,r,t),x(r,t)}},e.createCache=function(){var e=void 0,r=void 0,t={invalidate:function(){r=void 0,e=void 0},result:function(t,o){if(e)for(var n=0;n<t.length;n++)e[n]!==t[n]&&(r=void 0);return r||(r=o(),e=t),r}};return t},e.createMapping=function(e,r,t){var o=[],n=[];return{results:n,map:function(i){for(var a=i.map(e),s=n.slice(),d=0,p=0;p<i.length;p++){var c=i[p],u=a[p];if(u===o[d])n[p]=s[d],t(c,s[d],p),d++;else{for(var l=!1,f=1;f<o.length;f++){var v=(d+f)%o.length;if(o[v]===u){n[p]=s[v],t(i[p],s[v],p),d=v+1,l=!0;break}}l||(n[p]=r(c,p))}}n.length=i.length,o=a}}},e.createProjector=function(t){var o;t=u(t);var n=t.eventHandlerInterceptor;t.eventHandlerInterceptor=function(e,r,t,i){var a=function(){return o.scheduleRender(),r.apply(i.bind||this,arguments)};return n?n(e,a,t,i):a};var i,a=!0,s=!1,d=[],p=[],c=function(){if(i=void 0,a){a=!1;for(var e=0;e<d.length;e++){var r=p[e]();d[e].update(r)}a=!0}};return o={scheduleRender:function(){i||s||(i=requestAnimationFrame(c))},stop:function(){i&&(cancelAnimationFrame(i),i=void 0),s=!0},resume:function(){s=!1,a=!0,o.scheduleRender()},append:function(r,o){d.push(e.dom.append(r,o(),t)),p.push(o)},insertBefore:function(r,o){d.push(e.dom.insertBefore(r,o(),t)),p.push(o)},merge:function(r,o){d.push(e.dom.merge(r,o(),t)),p.push(o)},replace:function(e,o){var n=o();r(n,e.parentNode,e,t),e.parentNode.removeChild(e),d.push(x(n,t)),p.push(o)}}}});
//# sourceMappingURL=maquette.min.js.map
