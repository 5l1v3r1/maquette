!function(e){"use strict";var r=!1,n=function(){},t=[],o=function(e,r){var n={};return Object.keys(e).forEach(function(r){n[r]=e[r]}),r&&Object.keys(r).forEach(function(e){n[e]=r[e]}),n},i=function(e,r,n,t,o){for(var d=0;d<r.length;d++){var s=r[d];Array.isArray(s)?t=i(s,n,t):(a(e,s,o),n.splice(t,0,s),t++)}return t},a=function(e,n,t){if(!r){var o=n.vnodeSelector;if(!(""===o||n.properties&&n.properties.key)){for(var i=0;i<t.length;i++)if(o===t[i])throw new Error("["+e+"] contains undistinguishable child nodes ["+o+"], please add unique key properties.");t.push(o)}}},d=function(e){return{vnodeSelector:"",text:null==e?"":""+e,domNode:null}},s=function(e,r){if(null===r||void 0===r)return null;if(!Array.isArray(r))return r.hasOwnProperty("vnodeSelector")?[r]:[d(r)];for(var n=0,t=[];n<r.length;){var o=r[n];null===o||void 0===o?r.splice(n,1):Array.isArray(o)?(r.splice(n,1),n=i(e,o,r,n,t)):o.hasOwnProperty("vnodeSelector")?(a(e,o,t),n++):(r[n]=d(o),n++)}return r},u=/([\.#]?[a-zA-Z0-9_:-]+)/,l={nodeToRemove:function(e){e.parentNode.removeChild(e)},nodeAdded:function(){},nodeUpdated:function(){}},c={namespace:null,transitions:l},p=function(e){return o(c,e)},f=function(e,r,n){if(r){var t=n.eventHandlerInterceptor;for(var o in r){var i=r[o];if("class"===o||"className"===o||"classList"===o)throw new Error("Not supported, use 'classes' instead.");if("classes"===o)for(var a in i)i[a]&&e.classList.add(a);else{if("key"===o)continue;var d=typeof i;"function"===d?(t&&(i=t(o,i,e)),e[o]=i):"string"===d?e.setAttribute(o,i):e[o]=i}}}},v=function(e,r,n,t){if(n){var o=t.transitions;for(var i in n){var a=n[i],d=r[i];if("classes"===i){if(a===d)continue;var s=e.classList;for(var u in a){var l=!!a[u],c=!!d[u];l!==c&&(l?(s.add(u),o.nodeUpdated(e,"addClass",u,void 0,void 0)):(s.remove(u),o.nodeUpdated(e,"removeClass",u,void 0,void 0)))}}else{if(a||"string"!=typeof d||(a=""),"value"===i){if(e.value===a){a!==d&&o.nodeUpdated(e,"property","value",a,d);continue}e.value=a,a!==d&&o.nodeUpdated(e,"property","value",a,d);continue}if(a!==d){var p=typeof a;if("function"===p)throw new Error("Functions may not be updated on subsequent renders (property: "+i+")");"string"===p?e.setAttribute(i,a):e[i]=a,o.nodeUpdated(e,"property",i,a,d)}}}}},m=function(e,r,n){r&&r.forEach(function(r){g(r,function(r){e.appendChild(r)},n)})},h=function(e,r){return e.vnodeSelector!==r.vnodeSelector?!1:e.properties&&r.properties?e.properties.key===r.properties.key:!e.properties&&!r.properties},w=function(e,r,n){if(""!==r.vnodeSelector)for(var t=n;t<e.length;t++)if(h(e[t],r))return t;return-1},y=function(e,r,n,o){if(r!==n){r=r||t,n=n||t;for(var i,a=o.transitions,d=0,s=0;s<n.length;){var u=d<r.length?r[d]:null,l=n[s];if(u&&h(u,l))A(u,l,o),d++;else{var c=w(r,l,d+1);if(c>=0){for(i=d;c>i;i++)a.nodeToRemove(r[i].domNode,r[i].properties);A(r[c],l,o),d=c+1}else g(l,function(n){if(d<r.length){var t=r[d];e.insertBefore(n,t.domNode)}else e.appendChild(n)},o),a.nodeAdded(l.domNode,l.properties)}s++}if(r.length>d)for(i=d;i<r.length;i++)a.nodeToRemove(r[i].domNode,r[i].properties)}},g=function(e,r,n){if(""===e.vnodeSelector)e.domNode=document.createTextNode(e.text),r(e.domNode);else{var t,i,a,d,s=e.vnodeSelector.split(u);for(a=0;a<s.length;a++)i=s[a],i&&(d=i.charAt(0),t?"."===d?t.classList.add(i.substring(1)):"#"===d&&(t.id=i.substr(1)):("svg"===i&&(n=o(n,{namespace:"http://www.w3.org/2000/svg"})),t=e.domNode=n.namespace?document.createElementNS(n.namespace,i):document.createElement(i),r(t)));N(t,e,n)}},N=function(e,r,n){f(e,r.properties,n),m(e,r.children,n),r.properties&&r.properties.afterCreate&&r.properties.afterCreate(e,n,r.vnodeSelector,r.properties,r.children)},A=function(e,r,n){var t=e.domNode;if(!t)throw new Error("previous node was not mounted");e!==r&&(""===r.vnodeSelector?r.text!==e.text&&(t.nodeValue=r.text,n.transitions.nodeUpdated(t,"text",void 0,r.text,e.text)):(v(t,e.properties,r.properties,n),y(t,e.children,r.children,n),r.properties&&r.properties.afterUpdate&&r.properties.afterUpdate(t,n,r.vnodeSelector,r.properties,r.children)),r.domNode=e.domNode)};window.performance=window.performance||{offset:new Date,now:function(){return new Date-this.offset}};var S={lastCreateVDom:null,lastCreateDom:null,lastUpdateVDom:null,lastUpdateDom:null,lastProjector:null,createExecuted:function(e,r,n,t){S.lastProjector=t,S.lastCreateVDom=r-e,S.lastCreateDom=n-r},updateExecuted:function(e,r,n,t){S.lastProjector=t,S.lastUpdateVDom=r-e,S.lastUpdateDom=n-r}},x=function(e,r){return{update:function(n){if(e.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using mergeDom with one extra level)");A(e,n,r),e=n},domNode:e.domNode}},D={h:function(e,r,n){return!n&&("string"==typeof r||Array.isArray(r)||r&&r.hasOwnProperty("vnodeSelector"))&&(n=r,r=null),n=s(e,n),{vnodeSelector:e,properties:r,children:n,domNode:null}},createDom:function(e,r){return r=p(r),g(e,n,r),x(e,r)},appendToDom:function(e,r,n){n=p(n);var t=append.appendChild?function(e){append.appendChild(e)}:append;return g(r,t,n),x(r,n)},mergeDom:function(e,r,n){return n=p(n),r.domNode=e,N(e,r,n),x(r,n)},createProjector:function(e,r,n){n=p(n),n.eventHandlerInterceptor=function(e,r){return function(){return d.scheduleRender(),r.apply(this,arguments)}};var t,o=null,i=!1,a=function(){if(t=null,o){var i=window.performance.now(),a=r(),s=window.performance.now();o.update(a),S.updateExecuted(i,s,window.performance.now(),d)}else{var u=window.performance.now(),l=r(),c=window.performance.now();o=D.mergeDom(e,l,n),S.createExecuted(u,c,window.performance.now(),d)}};t=requestAnimationFrame(a);var d={scheduleRender:function(){t||i||(t=requestAnimationFrame(a))},destroy:function(){t&&(cancelAnimationFrame(t),t=null),i=!0}};return d},createCache:function(){var e=null,r=null,n={invalidate:function(){r=null,e=null},result:function(n,t){if(e)for(var o=0;o<n.length;o++)e[o]!==n[o]&&(r=null);return r||(r=t(),e=n),r}};return n},stats:S};D.renderLoop=D.createProjector,void 0!==e.module&&e.module.exports?e.module.exports=D:"function"==typeof e.define&&e.define.amd&&e.define(function(){return D}),window&&(window.maquette=D)}(this);