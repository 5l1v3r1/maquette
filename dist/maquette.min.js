!function(e,r){"function"==typeof define&&define.amd?define(["exports"],r):r("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:e.maquette={})}(this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version="3.0-begin";var r,t,n="http://www.w3.org/2000/svg",o=[],i=function(e,r){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),r&&Object.keys(r).forEach(function(e){t[e]=r[e]}),t},a=function(e,r){return e.vnodeSelector===r.vnodeSelector&&(e.properties&&r.properties?e.properties.key===r.properties.key&&e.properties.bind===r.properties.bind:!e.properties&&!r.properties)},s=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},d=function(e,r,t){for(var n=0,o=r.length;n<o;n++){var i=r[n];Array.isArray(i)?d(e,i,t):null!==i&&void 0!==i&&("string"==typeof i&&(i=s(i)),t.push(i))}},p=function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")},u={namespace:void 0,eventHandlerInterceptor:void 0,styleApplyer:function(e,r,t){e.style[r]=t},transitions:{enter:p,exit:p}},c=function(e){return i(u,e)},f=function(e){if("string"!=typeof e)throw new Error("Style values must be strings")},l=function(e,r,t){if(r)for(var o=t.eventHandlerInterceptor,i=Object.keys(r),a=i.length,s=0;s<a;s++)!function(a){var s=i[a],d=r[s];if("className"===s)throw new Error('Property "className" is not supported, use "class".');if("class"===s)d.split(/\s+/).forEach(function(r){return e.classList.add(r)});else if("classes"===s)for(var p=Object.keys(d),u=p.length,c=0;c<u;c++){var l=p[c];d[l]&&e.classList.add(l)}else if("styles"===s)for(var v=Object.keys(d),h=v.length,c=0;c<h;c++){var m=v[c],y=d[m];y&&(f(y),t.styleApplyer(e,m,y))}else if("key"!==s&&null!==d&&void 0!==d){var g=typeof d;"function"===g?0===s.lastIndexOf("on",0)&&(o&&(d=o(s,d,e,r)),"oninput"===s&&function(){var e=d;d=function(r){e.apply(this,[r]),r.target["oninput-value"]=r.target.value}}(),e[s]=d):"string"===g&&"value"!==s&&"innerHTML"!==s?t.namespace===n&&"href"===s?e.setAttributeNS("http://www.w3.org/1999/xlink",s,d):e.setAttribute(s,d):e[s]=d}}(s)},v=function(e,r,t,o){if(t){for(var i=!1,a=Object.keys(t),s=a.length,d=0;d<s;d++){var p=a[d],u=t[p],c=r[p];if("class"===p){if(c!==u)throw new Error('"class" property may not be updated. Use the "classes" property for conditional css classes.')}else if("classes"===p)for(var l=e.classList,v=Object.keys(u),h=v.length,m=0;m<h;m++){var y=v[m],g=!!u[y];g!==!!c[y]&&(i=!0,g?l.add(y):l.remove(y))}else if("styles"===p)for(var N=Object.keys(u),w=N.length,m=0;m<w;m++){var b=N[m],x=u[b];x!==c[b]&&(i=!0,x?(f(x),o.styleApplyer(e,b,x)):o.styleApplyer(e,b,""))}else if(u||"string"!=typeof c||(u=""),"value"===p){var A=e[p];A!==u&&(e["oninput-value"]?A===e["oninput-value"]:u!==c)&&(e[p]=u,e["oninput-value"]=void 0),u!==c&&(i=!0)}else if(u!==c){var S=typeof u;if("function"===S)throw new Error("Functions may not be updated on subsequent renders (property: "+p+"). Hint: declare event handler functions outside the render() function.");"string"===S&&"innerHTML"!==p?o.namespace===n&&"href"===p?e.setAttributeNS("http://www.w3.org/1999/xlink",p,u):"role"===p&&""===u?e.removeAttribute(p):e.setAttribute(p,u):e[p]!==u&&(e[p]=u),i=!0}}return i}},h=function(e,r,t){if(""!==r.vnodeSelector)for(var n=t;n<e.length;n++)if(a(e[n],r))return n;return-1},m=function(e,r){if(e.properties){var t=e.properties.enterAnimation;t&&("function"==typeof t?t(e.domNode,e.properties):r.enter(e.domNode,e.properties,t))}},y=function(e,r){var t=e.domNode;if(e.properties){var n=e.properties.exitAnimation;if(n){t.style.pointerEvents="none";var o=function(){t.parentNode&&t.parentNode.removeChild(t)};return"function"==typeof n?void n(t,o,e.properties):void r.exit(e.domNode,e.properties,n,o)}}t.parentNode&&t.parentNode.removeChild(t)},g=function(e,r,t,n){var o=e[r];if(""!==o.vnodeSelector){var i=o.properties;if(!(i?void 0===i.key?i.bind:i.key:void 0))for(var s=0;s<e.length;s++)if(s!==r){var d=e[s];if(a(d,o))throw"added"===n?new Error(t.vnodeSelector+" had a "+o.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable."):new Error(t.vnodeSelector+" had a "+o.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.")}}},N=function(e,n,i,s,d){if(i===s)return!1;i=i||o,s=s||o;for(var p,u=i.length,c=s.length,f=d.transitions,l=0,v=0,N=!1;v<c;){var w=l<u?i[l]:void 0,b=s[v];if(void 0!==w&&a(w,b))N=t(w,b,d)||N,l++;else{var x=h(i,b,l+1);if(x>=0){for(p=l;p<x;p++)y(i[p],f),g(i,p,e,"removed");N=t(i[x],b,d)||N,l=x+1}else r(b,n,l<u?i[l].domNode:void 0,d),m(b,f),g(s,v,e,"added")}v++}if(u>l)for(p=l;p<u;p++)y(i[p],f),g(i,p,e,"removed");return N},w=function(e,t,n){if(t)for(var o=0;o<t.length;o++)r(t[o],e,void 0,n)},b=function(e,r,t){w(e,r.children,t),r.text&&(e.textContent=r.text),l(e,r.properties,t),r.properties&&r.properties.afterCreate&&r.properties.afterCreate.apply(r.properties.bind||r.properties,[e,t,r.vnodeSelector,r.properties,r.children])};r=function(e,r,t,o){var a,s,d,p,u,c=0,f=e.vnodeSelector,l=r.ownerDocument;if(""===f)a=e.domNode=l.createTextNode(e.text),void 0!==t?r.insertBefore(a,t):r.appendChild(a);else{for(s=0;s<=f.length;++s)d=f.charAt(s),s!==f.length&&"."!==d&&"#"!==d||(p=f.charAt(c-1),u=f.slice(c,s),"."===p?a.classList.add(u):"#"===p?a.id=u:("svg"===u&&(o=i(o,{namespace:n})),void 0!==o.namespace?a=e.domNode=l.createElementNS(o.namespace,u):(a=e.domNode=e.domNode||l.createElement(u),"input"===u&&e.properties&&void 0!==e.properties.type&&a.setAttribute("type",e.properties.type)),void 0!==t?r.insertBefore(a,t):a.parentNode!==r&&r.appendChild(a)),c=s+1);b(a,e,o)}},t=function(e,r,t){var o=e.domNode,a=!1;if(e===r)return!1;var s=!1;if(""===r.vnodeSelector){if(r.text!==e.text){var d=o.ownerDocument.createTextNode(r.text);return o.parentNode.replaceChild(d,o),r.domNode=d,a=!0}}else 0===r.vnodeSelector.lastIndexOf("svg",0)&&(t=i(t,{namespace:n})),e.text!==r.text&&(s=!0,void 0===r.text?o.removeChild(o.firstChild):o.textContent=r.text),s=N(r,o,e.children,r.children,t)||s,s=v(o,e.properties,r.properties,t)||s,r.properties&&r.properties.afterUpdate&&r.properties.afterUpdate.apply(r.properties.bind||r.properties,[o,t,r.vnodeSelector,r.properties,r.children]);return s&&r.properties&&r.properties.updateAnimation&&r.properties.updateAnimation(o,r.properties,e.properties),r.domNode=e.domNode,a};var x=function(e,r){return{getLastRender:function(){return e},update:function(n){if(e.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");t(e,n,r),e=n},domNode:e.domNode}};e.h=function(e,r,t){Array.isArray(r)&&(t=r,r=void 0);var n,o;return void 0!==t&&1===t.length&&"string"==typeof t[0]?n=t[0]:t&&(d(e,t,o=[]),0===o.length&&(o=void 0)),{vnodeSelector:e,properties:r,children:o,text:""===n?void 0:n,domNode:null}},e.dom={create:function(e,t){return t=c(t),r(e,document.createElement("div"),void 0,t),x(e,t)},append:function(e,t,n){return n=c(n),r(t,e,void 0,n),x(t,n)},insertBefore:function(e,t,n){return n=c(n),r(t,e.parentNode,e,n),x(t,n)},merge:function(e,r,t){return t=c(t),r.domNode=e,b(e,r,t),x(r,t)},replace:function(e,t,n){return n=c(n),r(t,e.parentNode,e,n),e.parentNode.removeChild(e),x(t,n)}},e.createCache=function(){var e,r;return{invalidate:function(){r=void 0,e=void 0},result:function(t,n){if(e)for(var o=0;o<t.length;o++)e[o]!==t[o]&&(r=void 0);return r||(r=n(),e=t),r}}},e.createMapping=function(e,r,t){var n=[],o=[];return{results:o,map:function(i){for(var a=i.map(e),s=o.slice(),d=0,p=0;p<i.length;p++){var u=i[p],c=a[p];if(c===n[d])o[p]=s[d],t(u,s[d],p),d++;else{for(var f=!1,l=1;l<n.length+1;l++){var v=(d+l)%n.length;if(n[v]===c){o[p]=s[v],t(i[p],s[v],p),d=v+1,f=!0;break}}f||(o[p]=r(u,p))}}o.length=i.length,n=a}}};var A=function(e,r){for(var t=[];e.parentNode&&(e=e.parentNode,t.push(e),e!==r););return t},S=function(e,r){var t=e;return r.slice(1).forEach(function(r){t=e.children.find(function(e){return e.domNode===r})}),t},k=function(e,r){return function(t,n,o,i){return function(n){var o=r(),a=A(this,n.currentTarget),s=S(o.getLastRender(),a.reverse());return e.scheduleRender(),s.properties[t].apply(i.bind||this,arguments)}}};e.createProjector=function(r){var t,n,o=c(r),i=!0,a=!1,s=[],d=[],p=function(){if(n=void 0,i){i=!1;for(var e=0;e<s.length;e++){var r=d[e]();s[e].update(r)}i=!0}};return t={renderNow:p,scheduleRender:function(){n||a||(n=requestAnimationFrame(p))},stop:function(){n&&(cancelAnimationFrame(n),n=void 0),a=!0},resume:function(){a=!1,i=!0,t.scheduleRender()},append:function(r,n){var i;o.eventHandlerInterceptor=k(t,function(){return i}),i=e.dom.append(r,n(),o),s.push(i),d.push(n)},insertBefore:function(r,n){var i;o.eventHandlerInterceptor=k(t,function(){return i}),i=e.dom.insertBefore(r,n(),o),s.push(i),d.push(n)},merge:function(r,n){var i;o.eventHandlerInterceptor=k(t,function(){return i}),i=e.dom.merge(r,n(),o),s.push(i),d.push(n)},replace:function(r,n){var i;o.eventHandlerInterceptor=k(t,function(){return i}),i=e.dom.replace(r,n(),o),s.push(i),d.push(n)},detach:function(e){for(var r=0;r<d.length;r++)if(d[r]===e)return d.splice(r,1),s.splice(r,1)[0];throw new Error("renderFunction was not found")}}}});
//# sourceMappingURL=maquette.min.js.map
